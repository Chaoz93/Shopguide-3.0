# Changelog – New Standard Findings

Alle relevanten Änderungen an diesem Modul werden hier dokumentiert.
Format basiert auf [Keep a Changelog](https://keepachangelog.com/de/1.0.0/) und [SemVer](https://semver.org/lang/de/).

---

## [Unreleased]
### Fixed
- Zusätzliche Feld-Aliasse für Bestelltexte ergänzt, damit aktualisierte Shopguide-Findings-Dateien ihre Bestelllisten korrekt darstellen.
- Falschen Standardpfad zur lokalen Beispieldatei `Shopguide_Findings.json` behoben, sodass das Modul wieder ohne manuelle Dateiauswahl startet.
- Beschädigte Regulärausdrücke für Zeilenumbrüche repariert, damit das Modul wieder ohne Syntaxfehler geladen werden kann.
- Automatischer Import versucht nun mehrere Varianten des Standard-Dateinamens (z. B. `Shopguide_Findings.json` sowie ältere `Findings_Shopguide.json`), damit vorhandene Installationen ohne Umbenennung funktionieren.

## [1.4.5] – 2026-01-14
### Changed
- Die Findings-Auswahl ist jetzt standardmäßig eingeklappt, damit der Startzustand dem Modulkopf entspricht.

## [1.4.4] – 2026-01-14
### Fixed
- Die Einklapplogik für den Bereich „Findings auswählen“ wurde an die Modulkopf-Logik angeglichen, damit das Ein- und Ausklappen zuverlässiger reagiert.

## [1.4.3] – 2026-01-14
### Fixed
- Der „Ändern“-Button für Removal-Gründe klappt die Optionen jetzt wieder zuverlässig ein und aus.

## [1.4.2] – 2026-01-14
### Changed
- Ausgewählter Removal-Grund wird als Chip neben dem Titel angezeigt und die weiteren Optionen lassen sich einklappen.
- „Findings auswählen“-Kopfbereich bleibt beim Einklappen übersichtlich sichtbar.

## [1.4.1] – 2026-01-14
### Fixed
- Findings-Auswahlbereich nutzt jetzt eine dedizierte Collapse-Klasse, damit das Feld nach dem Einklappen zuverlässig wieder geöffnet werden kann.

## [1.4.0] – 2026-01-14
### Added
- Neuer Reason-Abschnitt zum Eingeben des Piloten-Reasontexts inklusive Variable `{Reason}` für Freitexte.

### Fixed
- Auswahlbereich für Findings klappt nicht mehr versehentlich zu, sodass das Eingabefeld zuverlässig sichtbar bleibt.

### Changed
- Platzraubenden Hinweistext im Findings-Auswahlbereich entfernt.

## [1.3.12] – 2026-01-14
### Changed
- RfR-Schnelltexte auf die neuen Removal-Formulierungen aktualisiert.

## [1.3.11] – 2026-01-13
### Fixed
- `{RfR}` wird jetzt im Zustand gespeichert und beim Laden wiederhergestellt.

## [1.3.10] – 2026-01-13
### Changed
- Removal-Grund wird jetzt als Variable `{RfR}` gespeichert und nicht mehr als Finding-Eintrag.

## [1.3.9] – 2026-01-13
### Added
- Schnellwahl für Removal-Gründe im Bereich „Findings auswählen“, inklusive Eingabe für freie Gründe oder MSN-Details.

## [1.3.8] – 2026-01-13
### Fixed
- Der Platzhalter `{findings}` nutzt in Freitexten wieder ausschließlich die ausgewählten Findings und nicht mehr den Inhalt des Findings-Textfelds.

## [1.3.7] – 2025-12-18
### Fixed
- Freitext-Profile übernehmen ihre Inhalte jetzt auch in die Ausgabefelder für Findings, Actions und Nonroutine, sobald der Editor geschlossen wird.
- Der Platzhaltertext der Freitext-Vorschau richtet sich nach dem aktuell geöffneten Tab.

## [1.3.6] – 2025-12-18
### Fixed
- Freitext-Vorschauinhalte werden beim Schließen des Editors wieder zuverlässig in das Routine-Feld übernommen.

## [1.3.3] – 2025-10-04
### Added
- Aspen-Autofill-Spalten lassen sich jetzt mit dem Keyword `aspen:<Spaltenname>` in Freitexten ausgeben, sodass Gerätemetadaten aus den Board-Spalten direkt übernommen werden können.

## [1.3.2] – 2025-10-03
### Added
- Automatisches Polling überwacht die ausgewählte Findings-Datei alle fünf Sekunden und lädt aktualisierte Inhalte sofort nach.

## [1.3.1] – 2025-10-02
### Changed
- Routine-Editor speichert Eingaben in Text- und Aspen-Blöcken sofort im lokalen Zustand und aktualisiert deren Darstellung auch nach dem Neuladen.
- Custom-Block-Renderer kennzeichnet Aspen-Felder mit einer eigenen CSS-Klasse und liefert detailliertere Konsolenmeldungen pro Blocktyp.

## [1.3.0] – 2025-10-02
### Added
- Routine-Editor mit Overlay, Tabs und Drag-and-Drop-Blöcken ermöglicht das Zusammenstellen von Findings-, Actions-, Routine- und Nonroutine-Textbausteinen inklusive Aspen-Vorschau und Mehrfachausgaben.
- Preset-Verwaltung speichert eigene Layouts samt Favoriten für häufig verwendete Parameter lokal und macht sie zwischen Sitzungen verfügbar.
- Hintergrundbeobachtung synchronisiert Inhalte automatisch, sobald Aspen-/Board-Daten, Findings-Datei oder Zustände in anderen Tabs aktualisiert werden.

## [1.2.5] – 2025-09-26
### Changed
- Modulmanifest aktualisiert und die Version auf 1.2.5 erhöht.

## [1.2.4] – 2025-09-26
### Changed
- Kopierfunktion der Bestellliste gibt nur noch die extrahierten Teilenummern zurück, sodass Mengenangaben nicht mehr in andere Anwendungen übernommen werden.

## [1.2.3] – 2025-09-29
### Added
- Neuer Button zum Auswählen einer Findings-JSON; die Auswahl wird eingelesen, gespeichert und der Dateipfad im Local Storage hinterlegt.
- Kontextbereich zeigt nun den aktuell verwendeten Findings-Dateipfad an.
- Schnellaktionen im Kopfbereich ermöglichen den direkten Zugriff auf die zuletzt genutzte Findings- oder Aspen-Datei ohne Umwege über das Kontextmenü.

### Changed
- Ausgewählte Findings-Pfade werden beim Laden synchronisiert und über Storage-Events zwischen Browser-Tabs aktuell gehalten.

## [1.2.2] – 2025-09-28
### Fixed
- Parser berücksichtigt nun auch verschachtelte JSON-Strukturen und findet Routine-, Nonroutine-, Parts-, Times- sowie Mods-Informationen über Aliasfelder.
- Objektinhalte werden beim Import in Zeilenform konvertiert, damit strukturierte Daten aus alternativen Layouts gut lesbar bleiben.

## [1.2.1] – 2025-09-27
### Fixed
- Partnummern werden nun beim Einlesen aus JSON, Aspen-Board und Dictionary sowie beim Zugriff aus lokalen Zuständen konsistent getrimmt und in Großbuchstaben konvertiert.
- Historieneinträge und gespeicherte Auswahlzustände übernehmen automatisch die normalisierte Partnummer, sodass mehrere Schreibweisen zusammengeführt werden.

## [1.2.0] – 2025-09-26
### Added
- Erweiterte Normalisierung erkennt unterschiedliche Feldnamen (z. B. `Findings`, `Actions`, `Routine`, `Mods`) automatisch und mappt sie auf die internen Standardfelder.
- Unterstützung für verschachtelte und alternative JSON-Strukturen (Arrays, Objekte, `entries`, `findings` usw.), inklusive robuster Dictionary-Erkennung.
- Anzeige zusätzlicher Metadaten pro Finding (Routine, Nonroutine, Parts, Times, Mods sowie weitere Zusatzfelder) direkt in den Auswahlhilfen.

### Changed
- Akzeptierte Findings füllen nun auch die Bereiche `Routine`, `Nonroutine` und ergänzen die Bestellliste automatisch mit hinterlegten Parts-Informationen.

## [1.1.0] – 2025-09-25
### Added
- Unterstützung für neue Aspen-Feldnamen:
  - MELDUNGS_NO → wird nun als Meldung erkannt
  - PART_NO → wird nun als Partnummer erkannt
  - SERIAL_NO → wird nun als Seriennummer erkannt

### Changed
- Version in NewStandardFindings.json von 1.0.0 auf 1.1.0 erhöht.
