# Changelog – New Standard Findings

Alle relevanten Änderungen an diesem Modul werden hier dokumentiert.
Format basiert auf [Keep a Changelog](https://keepachangelog.com/de/1.0.0/) und [SemVer](https://semver.org/lang/de/).

---

## [Unreleased]
### Fixed
- Zusätzliche Feld-Aliasse für Bestelltexte ergänzt, damit aktualisierte Shopguide-Findings-Dateien ihre Bestelllisten korrekt darstellen.
- Falschen Standardpfad zur lokalen Beispieldatei `Shopguide_Findings.json` behoben, sodass das Modul wieder ohne manuelle Dateiauswahl startet.
- Beschädigte Regulärausdrücke für Zeilenumbrüche repariert, damit das Modul wieder ohne Syntaxfehler geladen werden kann.
- Automatischer Import versucht nun mehrere Varianten des Standard-Dateinamens (z. B. `Shopguide_Findings.json` sowie ältere `Findings_Shopguide.json`), damit vorhandene Installationen ohne Umbenennung funktionieren.

## [1.8.26] – 2026-01-30
### Fixed
- Gerätestatus-Updates verändern nicht länger das ursprüngliche Erstellungsdatum eines Ereignisses in der History-Auswahl.

## [1.8.25] – 2026-01-30
### Changed
- Reason for Removal, Gerätestatus und Reason sind jetzt gemeinsam gruppiert, damit zusammengehörige Eingaben kompakt beieinander stehen.
- Findings-Bereich und die neue Gruppierung teilen sich die Modulbreite nun 50/50.

## [1.8.24] – 2026-01-29
### Changed
- History-Ereignisse werden jetzt pro Meldungsnummer automatisch erzeugt, sodass jede Meldung für die gleiche PN/SN-Kombination ein eigenes Event erhält.
- Der Gerätestatus aktualisiert die History-Auswahl sofort, damit der Statuswechsel direkt im Dropdown sichtbar ist.
- Manuelles Anlegen von History-Ereignissen entfällt, da neue Events automatisch beim Wechsel der Meldungsnummer entstehen.

## [1.8.23] – 2026-01-29
### Fixed
- Gerätestatus-Auswahl bleibt jetzt stabil und springt nach dem Wechsel nicht mehr auf den vorherigen Status zurück.
- Manuelle Statuswechsel werden sofort gespeichert, sodass der gewählte Gerätestatus im aktiven History-Ereignis erhalten bleibt.

## [1.8.22] – 2026-01-29
### Fixed
- Gerätestatus startet nun standardmäßig mit "Repair" und wird bei Auswahl (z. B. "Tested") zuverlässig in das aktuelle History-Ereignis übernommen.

## [1.8.20] – 2026-01-29
### Changed
- Statusgruppen der Bestellliste nutzen in breiteren Modulen eine mehrspaltige Darstellung, damit die Abschnitte nebeneinander angezeigt werden.

## [1.8.19] – 2026-01-29
### Added
- "Zuletzt verwendet"-Chips zeigen beim Hover ein Tonnen-Icon, über das Einträge direkt entfernt werden können.

### Changed
- Kopfzeile ordnet Auto-Update links und die Datei-/History-Buttons rechts in der obersten Zeile an.
- Aufklapp-Button sitzt jetzt rechts neben dem History-Dropdown, damit die Kopfzeile in einer Zeile bleibt.
- Auto-Update-Zeile ist linksbündig, während Datei-/History-Steuerung rechtsbündig in der ersten Zeile bleiben.

## [1.8.18] – 2026-01-29
### Changed
- Reason for Removal, Reason und die Finding-Auswahl liegen ab breiteren Modulgrößen nebeneinander.

## [1.8.17] – 2026-01-29
### Changed
- Rechtsklick auf die Ausgabefelder öffnet den Editor direkt ohne Zwischenmenü.
- Routine-Ausgabe bündelt Preset- und Statuskonfiguration im Editor, sodass beide Einstellungen in einem Modal erreichbar sind.

## [1.8.16] – 2026-01-29
### Changed
- Die vier Ausgabetextfelder kopieren ihren Inhalt jetzt per Linksklick, wodurch die separaten Kopierbuttons entfallen.
- Kopierte Ausgaben blitzen sehr kurz in reduzierter Akzentfarbe auf, und die Ausgabetextfelder haben keinen Größenänderungs-Handle mehr.

## [1.8.15] – 2026-01-27
### Added
- Event-History-Datei wird automatisch gepollt und der Auto-Update-Status im Kopfbereich um die History ergänzt.
- Wenn für eine PN/SN noch keine History existiert, wird automatisch ein erster Eintrag erzeugt und ausgewählt.

### Changed
- Kopfbereich zeigt keine Meldung/Part-/Seriennummern mehr an; stattdessen erscheinen nur Hinweise, wenn Daten fehlen.
- Hinweis auf die aktive Findings-Datei im Kopfbereich entfernt, da der Auto-Update-Status bereits den Stand anzeigt.

## [1.8.14] – 2026-01-27
### Changed
- Auto-Update-Status im Kopfbereich zeigt nun getrennt den Stand für Findings- und Aspen-Datei an.
- Aspen-Datei wird jetzt wie das Aspen-Board automatisch geprüft und bei Änderungen neu geladen.
- Bei zu großen Aspen-Dateien wird ein Tab-internes Fallback genutzt, damit kein localStorage-Quota-Fehler mehr erscheint.

## [1.8.13] – 2026-01-27
### Added
- SRU-Exchange-Eingaben für "Exchange Input" und "Exchange Output" ergänzt, die bei SRU-Exchange-Status (inkl. Suffixe) angezeigt werden und als Keywords `{sn_in}` bzw. `{sn_out}` in Ausgaben genutzt werden können.
- SRU-Exchange-Keywords `{sn_in}` und `{sn_out}` werden nun auch innerhalb der einzelnen Finding-Texte ersetzt (leere Werte bleiben leer).

## [1.8.12] – 2026-01-26
### Fixed
- Statuswechsel in Findings-Eingaben speichern sofort, damit ein Umstellen nicht mehr auf den letzten Zustand zurückspringt.

## [1.8.11] – 2026-01-26
### Fixed
- Nonroutine-Ausgabefeld blendet sich jetzt sofort ein, sobald ein Finding mit Nonroutine-Status hinzugefügt wird.

## [1.8.10] – 2026-01-26
### Fixed
- Nonroutine-Ausgabefeld reagiert jetzt sofort auf Statuswechsel und blendet sich ohne Seitenreload ein oder aus.

## [1.8.9] – 2026-01-26
### Changed
- Nonroutine-Ausgabefeld wird automatisch ausgeblendet, wenn alle gewählten Findings den Status „Spare“ oder „SRU Exchange“ haben (auch wenn der Status nicht explizit gesetzt ist).

## [1.8.7] – 2026-01-23
### Changed
- Bearbeiten- und Löschen-Icons der Findings-Eingaben sind jetzt schlichter und einfarbig gestaltet.

## [1.8.6] – 2026-01-23
### Added
- Stift-Button für ausgewählte Findings, der den Findings-Editor mit vorausgewähltem Eintrag öffnet und Updates sofort in den Ausgaben übernimmt.

## [1.8.4] – 2026-01-23
### Fixed
- Bestellliste zeigt nur noch hinterlegte Teilenummern und blendet Geräte-Partnummern aus.
- Customfindings werden inklusive Bestellnummern und Texte in der PN/SN-History gespeichert und nach Reload wiederhergestellt.

## [1.8.3] – 2026-01-23
### Added
- Spare-Customfindings ergänzen das Keyword `{findings}` auch in der Routine-Ausgabe.

### Changed
- Geräte-Partnummern erscheinen in der Bestellliste mit Menge 1, falls keine eigene Teileliste vorhanden ist.

## [1.8.2] – 2026-01-23
### Changed
- Spare-Customfindings bleiben im normalen Finding-Output, ohne zusätzlichen Routine-Eintrag.

## [1.8.1] – 2026-01-23
### Added
- Vorbefüllung der Geräte-Partnummer beim Übergang vom Custom-Finding-Dialog in den Findings-Editor.

### Changed
- Routine-Ausgabe ergänzt bei Status „Spare“ den Findingstext, damit Custom-Findings vollständig angezeigt werden.

## [1.8.0] – 2026-01-23
### Added
- Custom-Finding-Dialog für schnelle Eingabe der standardisierten Textstücke inklusive Bestellnummern & Mengen.
- Option, Custom Findings als vorbefüllten Standardfinding-Entwurf direkt im Findings-Editor weiterzubearbeiten.
- Prefill wird beim Speichern jetzt auch in bereits geöffneten Findings-Editor-Instanzen übernommen.

## [1.7.0] – 2026-01-23
### Added
- Routine-Kontextmenü enthält jetzt ein Einstellfenster für den Non-Routine-Hinweis inklusive `{items}`-Platzhalter und anpassbaren Status-Anzeigen.

### Changed
- Statusdarstellungen im Routine-Hinweis sind jetzt konfigurierbar (z. B. Abnormal wear and tear → AWAT).

## [1.6.4] – 2026-01-23
### Changed
- Routine-Platzhalter `{findings}` blendet bei Mishandling-, Missing-Parts- und Abnormal-Wear-Status (inklusive SRU-Exchange-Varianten) die Findingstexte aus und zeigt stattdessen den Hinweis auf den Non-Routine-Tab.

## [1.6.3] – 2026-01-23
### Changed
- Findings-Auswahlfeld nutzt jetzt etwa 60 % der Gesamtbreite, damit das Status-Dropdown kompakter bleibt.
- Der Nonroutine-Platzhalter übernimmt vorrangig den Text aus `nonRoutineFinding`, sofern vorhanden.

## [1.6.2] – 2026-01-22
### Changed
- Bestelllisten-Labelgruppen erscheinen jetzt in leicht abgedunkelten, abgerundeten Kästen zur besseren optischen Trennung.

## [1.6.1] – 2026-01-22
### Changed
- Bestellliste zeigt nur noch die Überschrift „Bestelliste“ ohne Geräte- oder „Also applies“-Zusatz.
- Statusgruppen in der Bestellliste haben jetzt jeweils eine eigene Kopier-Schaltfläche, und Trennlinien erscheinen nur noch zwischen den Statusabschnitten.
- Partnummern werden pro Finding-Label optisch gruppiert statt mit Trennlinien pro Zeile.

## [1.6.0] – 2026-01-22
### Added
- Status-Dropdown je Finding, damit pro Auswahl ein Status erfasst und gespeichert werden kann.

### Changed
- Bestellliste gruppiert Parts jetzt nach Status und Finding-Label, inklusive Ausgabe im Bestelltext.
- Status- und Label-Überschriften der Bestellliste übernehmen jetzt die gleiche Schriftfarbe wie die Parts.
- Trennlinien in der Bestellliste übernehmen ebenfalls die Part-Textfarbe und neue Findings starten standardmäßig mit Status "Spare".
- Doppelte Status-Abschnitte (z. B. "Spare") werden nicht mehr doppelt gerendert.

## [1.5.8] – 2026-01-22
### Changed
- Kopierfunktion der Bestellliste schreibt die Menge jetzt in Spalte 5 und 6 der Bestellmatrix.

## [1.5.7] – 2026-01-19
### Fixed
- Mengeneinheiten in der Bestellliste werden nun immer mit Komma angezeigt und beim Kopieren ausgegeben, auch wenn die Quelle einen Punkt enthält.

## [1.5.6] – 2026-01-19
### Changed
- History-Dropdown wählt beim Laden automatisch das neueste Ereignis und zeigt einen roten Hinweis, wenn ein älteres Ereignis aktiv ist.

## [1.5.5] – 2026-01-19
### Changed
- Kopierfunktion der Bestellliste erstellt jetzt tabellenartige Zeilen mit Partnummer in Spalte 1 und Menge in Spalte 6.

## [1.5.4] – 2026-01-19
### Changed
- Event-History speichert nur noch die ausgewählten Finding-Labels statt aller Unterpunkte.
- Gespeicherte Ereignisse enthalten jetzt den Reason-for-Removal-Status sowie den Piloten-Reason-Text.

## [1.5.3] – 2026-01-19
### Added
- Event-Liste im Aktionsmenü zeigt beim Hover ein Löschsymbol, das ein Bestätigungsdialog für gespeicherte Ereignisse öffnet.

### Changed
- Eingeklappter Header nutzt ein klareres Rasterlayout für Meldung, Partnummer und Seriennummer.
- Aktuelles Findings-Ereignis aktualisiert sich automatisch, sobald eine neue Auswahl hinzugefügt oder entfernt wird.

## [1.5.2] – 2026-01-19
### Added
- History-Dropdown im Aktionsmenü speichert Findings-Ereignisse pro Part-/Seriennummer mit Zeitstempel und ermöglicht das Umschalten zwischen gespeicherten Events.
- History wird als eigene JSON-Datei im Root-Ordner geführt und bei Bedarf automatisch angelegt.
- „Findings auswählen“ enthält jetzt einen Plus-Button zum Speichern eines Ereignisses.
- History-Dropdown ist im eingeklappten Header verfügbar und zeigt Datumswerte im Format TT.MM.JJJJ.

## [1.4.7] – 2026-01-14
### Changed
- Der Bereich „Findings auswählen“ ist jetzt fest integriert und nicht mehr einklappbar.

## [1.4.6] – 2026-01-14
### Fixed
- Der eingeklappte Bereich „Findings auswählen“ bleibt sichtbar und unterscheidbar, damit er nicht wie ausgeblendet wirkt.

## [1.4.5] – 2026-01-14
### Changed
- Die Findings-Auswahl ist jetzt standardmäßig eingeklappt, damit der Startzustand dem Modulkopf entspricht.

## [1.4.4] – 2026-01-14
### Fixed
- Die Einklapplogik für den Bereich „Findings auswählen“ wurde an die Modulkopf-Logik angeglichen, damit das Ein- und Ausklappen zuverlässiger reagiert.

## [1.4.3] – 2026-01-14
### Fixed
- Der „Ändern“-Button für Removal-Gründe klappt die Optionen jetzt wieder zuverlässig ein und aus.

## [1.4.2] – 2026-01-14
### Changed
- Ausgewählter Removal-Grund wird als Chip neben dem Titel angezeigt und die weiteren Optionen lassen sich einklappen.
- „Findings auswählen“-Kopfbereich bleibt beim Einklappen übersichtlich sichtbar.

## [1.4.1] – 2026-01-14
### Fixed
- Findings-Auswahlbereich nutzt jetzt eine dedizierte Collapse-Klasse, damit das Feld nach dem Einklappen zuverlässig wieder geöffnet werden kann.

## [1.4.0] – 2026-01-14
### Added
- Neuer Reason-Abschnitt zum Eingeben des Piloten-Reasontexts inklusive Variable `{Reason}` für Freitexte.

### Fixed
- Auswahlbereich für Findings klappt nicht mehr versehentlich zu, sodass das Eingabefeld zuverlässig sichtbar bleibt.

### Changed
- Platzraubenden Hinweistext im Findings-Auswahlbereich entfernt.

## [1.3.12] – 2026-01-14
### Changed
- RfR-Schnelltexte auf die neuen Removal-Formulierungen aktualisiert.

## [1.3.11] – 2026-01-13
### Fixed
- `{RfR}` wird jetzt im Zustand gespeichert und beim Laden wiederhergestellt.

## [1.3.10] – 2026-01-13
### Changed
- Removal-Grund wird jetzt als Variable `{RfR}` gespeichert und nicht mehr als Finding-Eintrag.

## [1.3.9] – 2026-01-13
### Added
- Schnellwahl für Removal-Gründe im Bereich „Findings auswählen“, inklusive Eingabe für freie Gründe oder MSN-Details.

## [1.3.8] – 2026-01-13
### Fixed
- Der Platzhalter `{findings}` nutzt in Freitexten wieder ausschließlich die ausgewählten Findings und nicht mehr den Inhalt des Findings-Textfelds.

## [1.3.7] – 2025-12-18
### Fixed
- Freitext-Profile übernehmen ihre Inhalte jetzt auch in die Ausgabefelder für Findings, Actions und Nonroutine, sobald der Editor geschlossen wird.
- Der Platzhaltertext der Freitext-Vorschau richtet sich nach dem aktuell geöffneten Tab.

## [1.3.6] – 2025-12-18
### Fixed
- Freitext-Vorschauinhalte werden beim Schließen des Editors wieder zuverlässig in das Routine-Feld übernommen.

## [1.3.3] – 2025-10-04
### Added
- Aspen-Autofill-Spalten lassen sich jetzt mit dem Keyword `aspen:<Spaltenname>` in Freitexten ausgeben, sodass Gerätemetadaten aus den Board-Spalten direkt übernommen werden können.

## [1.3.2] – 2025-10-03
### Added
- Automatisches Polling überwacht die ausgewählte Findings-Datei alle fünf Sekunden und lädt aktualisierte Inhalte sofort nach.

## [1.3.1] – 2025-10-02
### Changed
- Routine-Editor speichert Eingaben in Text- und Aspen-Blöcken sofort im lokalen Zustand und aktualisiert deren Darstellung auch nach dem Neuladen.
- Custom-Block-Renderer kennzeichnet Aspen-Felder mit einer eigenen CSS-Klasse und liefert detailliertere Konsolenmeldungen pro Blocktyp.

## [1.3.0] – 2025-10-02
### Added
- Routine-Editor mit Overlay, Tabs und Drag-and-Drop-Blöcken ermöglicht das Zusammenstellen von Findings-, Actions-, Routine- und Nonroutine-Textbausteinen inklusive Aspen-Vorschau und Mehrfachausgaben.
- Preset-Verwaltung speichert eigene Layouts samt Favoriten für häufig verwendete Parameter lokal und macht sie zwischen Sitzungen verfügbar.
- Hintergrundbeobachtung synchronisiert Inhalte automatisch, sobald Aspen-/Board-Daten, Findings-Datei oder Zustände in anderen Tabs aktualisiert werden.

## [1.2.5] – 2025-09-26
### Changed
- Modulmanifest aktualisiert und die Version auf 1.2.5 erhöht.

## [1.2.4] – 2025-09-26
### Changed
- Kopierfunktion der Bestellliste gibt nur noch die extrahierten Teilenummern zurück, sodass Mengenangaben nicht mehr in andere Anwendungen übernommen werden.

## [1.2.3] – 2025-09-29
### Added
- Neuer Button zum Auswählen einer Findings-JSON; die Auswahl wird eingelesen, gespeichert und der Dateipfad im Local Storage hinterlegt.
- Kontextbereich zeigt nun den aktuell verwendeten Findings-Dateipfad an.
- Schnellaktionen im Kopfbereich ermöglichen den direkten Zugriff auf die zuletzt genutzte Findings- oder Aspen-Datei ohne Umwege über das Kontextmenü.

### Changed
- Ausgewählte Findings-Pfade werden beim Laden synchronisiert und über Storage-Events zwischen Browser-Tabs aktuell gehalten.

## [1.2.2] – 2025-09-28
### Fixed
- Parser berücksichtigt nun auch verschachtelte JSON-Strukturen und findet Routine-, Nonroutine-, Parts-, Times- sowie Mods-Informationen über Aliasfelder.
- Objektinhalte werden beim Import in Zeilenform konvertiert, damit strukturierte Daten aus alternativen Layouts gut lesbar bleiben.

## [1.2.1] – 2025-09-27
### Fixed
- Partnummern werden nun beim Einlesen aus JSON, Aspen-Board und Dictionary sowie beim Zugriff aus lokalen Zuständen konsistent getrimmt und in Großbuchstaben konvertiert.
- Historieneinträge und gespeicherte Auswahlzustände übernehmen automatisch die normalisierte Partnummer, sodass mehrere Schreibweisen zusammengeführt werden.

## [1.2.0] – 2025-09-26
### Added
- Erweiterte Normalisierung erkennt unterschiedliche Feldnamen (z. B. `Findings`, `Actions`, `Routine`, `Mods`) automatisch und mappt sie auf die internen Standardfelder.
- Unterstützung für verschachtelte und alternative JSON-Strukturen (Arrays, Objekte, `entries`, `findings` usw.), inklusive robuster Dictionary-Erkennung.
- Anzeige zusätzlicher Metadaten pro Finding (Routine, Nonroutine, Parts, Times, Mods sowie weitere Zusatzfelder) direkt in den Auswahlhilfen.

### Changed
- Akzeptierte Findings füllen nun auch die Bereiche `Routine`, `Nonroutine` und ergänzen die Bestellliste automatisch mit hinterlegten Parts-Informationen.

## [1.1.0] – 2025-09-25
### Added
- Unterstützung für neue Aspen-Feldnamen:
  - MELDUNGS_NO → wird nun als Meldung erkannt
  - PART_NO → wird nun als Partnummer erkannt
  - SERIAL_NO → wird nun als Seriennummer erkannt

### Changed
- Version in NewStandardFindings.json von 1.0.0 auf 1.1.0 erhöht.
