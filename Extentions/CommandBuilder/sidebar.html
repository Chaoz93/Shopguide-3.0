<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Command Builder</title>
    <style>
      :root {
        --builder-bg: var(--module-layer-1-module-bg, #0f172a);
        --builder-surface: var(--module-layer-2-module-bg, #111827);
        --builder-border: var(--module-layer-2-module-border, #1f2937);
        --builder-text: var(--module-layer-1-module-text, #f8fafc);
        --builder-subtle: var(--module-layer-2-module-text, #94a3b8);
        --builder-accent: var(--module-layer-3-module-border, #22d3ee);
        --builder-positive: var(--module-layer-3-module-text, #22c55e);
        --builder-warning: var(--module-layer-3-module-bg, #f59e0b);
      }

      body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, Segoe UI, sans-serif;
        color: var(--builder-text);
        background: var(--builder-bg);
      }

      .app {
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      h1 {
        font-size: 16px;
        margin: 0;
        letter-spacing: 0.01em;
      }

      p {
        margin: 0;
        color: var(--builder-subtle);
        font-size: 13px;
      }

      .input-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      label {
        font-size: 13px;
        color: var(--builder-subtle);
      }

      textarea {
        width: 100%;
        min-height: 140px;
        resize: vertical;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid var(--builder-border);
        background: var(--builder-surface);
        color: var(--builder-text);
        font-size: 13px;
        box-sizing: border-box;
      }

      textarea:focus {
        outline: 2px solid var(--builder-accent);
        outline-offset: 1px;
      }

      .actions {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .actions-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 8px;
      }

      .command-groups {
        display: grid;
        gap: 12px;
      }

      .command-group {
        border: 1px solid var(--builder-border);
        border-radius: 12px;
        padding: 12px;
        background: color-mix(in srgb, var(--builder-surface) 90%, transparent);
        display: grid;
        gap: 10px;
      }

      .command-group h2 {
        font-size: 12px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin: 0;
        color: var(--builder-subtle);
      }

      button {
        border: 1px solid var(--builder-border);
        background: var(--builder-surface);
        color: var(--builder-text);
        border-radius: 8px;
        padding: 8px 12px;
        cursor: pointer;
        font-size: 13px;
        transition: border-color 150ms ease, background 150ms ease;
      }

      button:hover {
        border-color: var(--builder-accent);
      }

      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .status {
        min-height: 20px;
        font-size: 12px;
        color: var(--builder-subtle);
      }

      .status[data-tone="success"] {
        color: var(--builder-positive);
      }

      .status[data-tone="warning"] {
        color: var(--builder-warning);
      }

      .note {
        font-size: 12px;
        color: var(--builder-subtle);
        background: var(--builder-surface);
        border: 1px solid var(--builder-border);
        padding: 8px;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <div>
        <h1>Command Builder</h1>
        <p>
          Assemble automation instructions with quick buttons. Hover a command to
          learn what it does, insert it into the current line, and use the
          element picker to fill CLICK, WAITFORELEMENT, or INPUT selectors.
        </p>
      </div>

      <div class="input-group">
        <label for="commands">Commands</label>
        <textarea id="commands"></textarea>
        <div class="actions">
          <div class="command-groups">
            <div class="command-group">
              <h2>Navigation</h2>
              <div class="actions-row">
                <button id="add-goto" title="Insert 'GOTO ' on this line and place the cursor for the URL">Add GOTO</button>
                <button id="try-goto" title="Navigate the active tab to the URL on the current GOTO line">Try GOTO</button>
              </div>
            </div>
            <div class="command-group">
              <h2>Waiting</h2>
              <div class="actions-row">
                <button id="add-waittoload" title="Insert WAITTOLOAD and move to the next line">Add WAITTOLOAD</button>
                <button
                  id="add-waitforelement"
                  title="Insert WAITFORELEMENT and keep the cursor on this line to enter an element selector (quoted)"
                >
                  Add WAITFORELEMENT
                </button>
                <button id="add-wait" title="Insert WAIT <ms> and move to the next line">Add WAIT</button>
              </div>
            </div>
            <div class="command-group">
              <h2>Actions</h2>
              <div class="actions-row">
                <button id="add-click" title="Insert CLICK and keep the cursor on this line to enter an element selector (quoted)">Add CLICK</button>
                <button id="add-input" title="Insert INPUT \"selector\" \"text\" and keep the cursor ready to edit">Add INPUT</button>
                <button
                  id="pick-element"
                  title="Start the element picker to capture a selector for the current CLICK/WAITFORELEMENT/INPUT line"
                >
                  Pick element
                </button>
              </div>
            </div>
            <div class="command-group">
              <h2>Clipboard</h2>
              <div class="actions-row">
                <button id="copy-commands" title="Copy all commands to the clipboard">Copy commands</button>
              </div>
            </div>
          </div>
        </div>
        <div id="status" class="status" aria-live="polite"></div>
      </div>

      <div class="note">
        GOTO inserts the URL and can be tested immediately. WAITTOLOAD moves you
        to the next line. WAITFORELEMENT waits until a selector appears.
        WAIT adds a millisecond pause. CLICK and INPUT stay on the current line
        so you can type a selector or pick one from the active page; selecting
        an element fills the quoted selector and prepares the next command line.
      </div>
    </div>

    <script src="sidebar.js"></script>
  </body>
</html>
